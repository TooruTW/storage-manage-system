# å°ˆæ¡ˆåˆ†æå ±å‘Š

## 1. æ‹¼å­—éŒ¯èª¤

### 1.1 è³‡æ–™å¤¾åç¨±å¤§å°å¯«éŒ¯èª¤

**å•é¡Œï¼š**

- âœ… `src/api/supabase/inboundAPi/` å·²æ”¹ç‚º `inboundApi/`
- âœ… `src/api/supabase/outboundAPi/` å·²æ”¹ç‚º `outboundApi/`

**å½±éŸ¿ç¯„åœï¼š**

- æ‰€æœ‰å¼•ç”¨é€™äº› API çš„æ–‡ä»¶éƒ½éœ€è¦æ›´æ–° import è·¯å¾‘
- ç¸½å…±å½±éŸ¿ç´„ 14 å€‹æ–‡ä»¶

**éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶ï¼š**

- `src/components/views/CreateView/CreateInbound/CreatingBox/index.tsx` (line 17)
- `src/components/views/CreateView/CreateOutbound/CreatingBox/index.tsx` (line 16)
- `src/components/views/DatabaseView/InboundTable/index.tsx` (lines 4-5)
- `src/components/views/DatabaseView/OutboundTable/index.tsx` (lines 4-5)
- `src/components/views/MobileDatabaseView/ResultArea/Cost/index.tsx` (line 2)
- `src/components/views/MobileDatabaseView/ResultArea/Price/index.tsx` (line 3)
- `src/components/views/Dashboard/hook/useGetDashboardData.tsx` (line 1)
- `src/components/views/CreateView/CreateOutbound/CreatingBox/SearchingResult/Results/index.tsx` (line 6)
- ä»¥åŠæ‰€æœ‰ API æª”æ¡ˆæœ¬èº«

### 1.2 é¡å‹å‘½åä¸ä¸€è‡´

**å•é¡Œï¼š**

- `Custom` vs `Customer` å‘½åä¸ä¸€è‡´
- åœ¨ `src/components/views/DatabaseView/CustomTable/` ä½¿ç”¨ `Custom`
- åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ `Customer`

**å»ºè­°ï¼š**

- çµ±ä¸€ä½¿ç”¨ `Customer`ï¼ˆæ›´èªç¾©åŒ–ï¼‰

### 1.3 API æª”æ¡ˆä¸­çš„é¡å‹éŒ¯èª¤

**å•é¡Œï¼š**

- `src/api/supabase/customerApi/usePostCustomerApi.ts` (line 5)
  - å‡½æ•¸åƒæ•¸é¡å‹ä½¿ç”¨ `SupplierType`ï¼Œæ‡‰è©²ä½¿ç”¨ `CustomerType`
  - éŒ¯èª¤è¨Šæ¯ä¹Ÿå¯«æˆ "Post supplier error"ï¼Œæ‡‰è©²æ”¹ç‚º "Post customer error"

---

## 2. å¯æ‹†åˆ†çš„çµ„ä»¶

### 2.1 BaseTable çµ„ä»¶éæ–¼é¾å¤§

**æª”æ¡ˆï¼š** `src/components/views/DatabaseView/shared/BaseTable/index.tsx` (297 è¡Œ)

**å•é¡Œï¼š**

- åŒ…å«å¤ªå¤šè·è²¬ï¼šè¡¨æ ¼æ¸²æŸ“ã€è™›æ“¬åŒ–ã€ç·¨è¼¯ç‹€æ…‹ç®¡ç†ã€è³‡æ–™æ›´æ–°ã€ç¢ºèªå°è©±æ¡†
- é‚è¼¯è¤‡é›œï¼Œé›£ä»¥ç¶­è­·

**å»ºè­°æ‹†åˆ†ï¼š**

1. **æå–è™›æ“¬åŒ–é‚è¼¯** â†’ `useVirtualTable.ts` hook

   ```typescript
   // æå–è™›æ“¬åŒ–ç›¸é—œçš„é‚è¼¯
   const useVirtualTable = (rows, containerRef) => { ... }
   ```

2. **æå–ç·¨è¼¯ç‹€æ…‹ç®¡ç†** â†’ `useTableEditing.ts` hook

   ```typescript
   // æå–ç·¨è¼¯ç›¸é—œçš„ç‹€æ…‹å’Œé‚è¼¯
   const useTableEditing = (initialData) => { ... }
   ```

3. **æå–è¡¨æ ¼é ­éƒ¨** â†’ `TableHeader.tsx` çµ„ä»¶

   ```typescript
   // æå– thead éƒ¨åˆ†çš„æ¸²æŸ“é‚è¼¯
   ```

4. **æå–è¡¨æ ¼ä¸»é«”** â†’ `TableBody.tsx` çµ„ä»¶
   ```typescript
   // æå– tbody éƒ¨åˆ†çš„æ¸²æŸ“é‚è¼¯
   ```

### 2.2 CreatingBox çµ„ä»¶é‚è¼¯å¯ä»¥æå–

**æª”æ¡ˆï¼š**

- `src/components/views/CreateView/CreateInbound/CreatingBox/index.tsx` (135 è¡Œ)
- `src/components/views/CreateView/CreateOutbound/CreatingBox/index.tsx` (108 è¡Œ)

**å»ºè­°ï¼š**

- æå– `addDataToLocalStorage` é‚è¼¯åˆ°è‡ªå®šç¾© hook
- æå– `handleUpload` é‚è¼¯åˆ°è‡ªå®šç¾© hook
- å¯ä»¥è€ƒæ…®å‰µå»ºä¸€å€‹å…±ç”¨çš„ `useCreateForm` hookï¼Œå› ç‚ºå…©å€‹çµ„ä»¶é‚è¼¯ç›¸ä¼¼

### 2.3 TableBox çµ„ä»¶å¯ä»¥åˆä½µ

**æª”æ¡ˆï¼š**

- `src/components/views/CreateView/CreateInbound/TableBox/index.tsx` (12 è¡Œ)
- `src/components/views/CreateView/CreateOutbound/TableBox/index.tsx` (12 è¡Œ)

**å•é¡Œï¼š**

- å…©å€‹çµ„ä»¶å®Œå…¨ç›¸åŒï¼Œåªæ˜¯å°å…¥çš„ Table ä¸åŒ

**å»ºè­°ï¼š**

- å¯ä»¥å‰µå»ºä¸€å€‹å…±ç”¨çš„ `TableBox` çµ„ä»¶ï¼Œæ¥å— Table ä½œç‚º children æˆ– props

### 2.4 Header çµ„ä»¶å¯ä»¥æ‹†åˆ†

**æª”æ¡ˆï¼š** `src/components/layout/Header/index.tsx` (60 è¡Œ)

**å»ºè­°ï¼š**

- æå–æ™‚é–“é¡¯ç¤ºé‚è¼¯ â†’ `TimeDisplay.tsx` çµ„ä»¶
- æå–å°èˆªé‚è¼¯ â†’ è‡ªå®šç¾© hook

---

## 3. éå¤šåˆ¤æ–·å¼

### 3.1 BaseTable ä¸­çš„æ¢ä»¶åˆ¤æ–·

**æª”æ¡ˆï¼š** `src/components/views/DatabaseView/shared/BaseTable/index.tsx`

**å•é¡Œï¼š**

- Line 49-57: `editingStyle` å’Œ `tableDataStyle` ä½¿ç”¨ä¸‰å…ƒé‹ç®—ç¬¦ï¼Œå¯ä»¥ç°¡åŒ–
- Line 210-287: è¡¨æ ¼æ¸²æŸ“é‚è¼¯ä¸­æœ‰å¤šå±¤æ¢ä»¶åˆ¤æ–·

**å»ºè­°ï¼š**

```typescript
// ç•¶å‰ï¼š
const editingStyle = useMemo(() => {
  return isEditing ? "bg-primary/10" : "";
}, [isEditing]);

// å»ºè­°ï¼š
const editingStyle = useMemo(
  () => (isEditing ? "bg-primary/10" : ""),
  [isEditing]
);
```

### 3.2 ButtonContainer ä¸­çš„æ¢ä»¶åˆ¤æ–·

**æª”æ¡ˆï¼š** `src/components/views/Home/ButtonContainer/index.tsx`

**å•é¡Œï¼š**

- Line 47-57: å¤šå±¤åµŒå¥—çš„æ¢ä»¶åˆ¤æ–·
- Line 23-28: `isChecking` å¯ä»¥ç°¡åŒ–

**å»ºè­°ï¼š**

```typescript
// ç•¶å‰ï¼š
const isChecking = useMemo(() => {
  return loginState === "checking";
}, [loginState]);

// å»ºè­°ï¼š
const isChecking = loginState === "checking";

// æˆ–è€…ä½¿ç”¨æ—©æœŸè¿”å›æ¨¡å¼ç°¡åŒ– useEffect
useEffect(() => {
  if (loginState === "failed") {
    setButtonList(unLoginButtonList);
    return;
  }

  if (loginState === "success") {
    setButtonList(isMobile ? mobileLoginButtonList : loginButtonList);
  }
}, [loginState, isMobile]);
```

### 3.3 Home çµ„ä»¶ä¸­çš„åˆ¤æ–·

**æª”æ¡ˆï¼š** `src/components/views/Home/index.tsx`

**å•é¡Œï¼š**

- Line 11-14: `isLoggingIn` ä½¿ç”¨ useMemo ä½†è¨ˆç®—ç°¡å–®
- Line 18-21: useEffect ä¸­çš„æ¢ä»¶åˆ¤æ–·å¯ä»¥ç°¡åŒ–

**å»ºè­°ï¼š**

```typescript
// ç•¶å‰ï¼š
const isLoggingIn = useMemo(
  () => location.pathname === "/home/login",
  [location.pathname]
);

// å»ºè­°ï¼š
const isLoggingIn = location.pathname === "/home/login";

// ç•¶å‰ï¼š
useEffect(() => {
  if (isLoggingIn) setStyle("gap-1");
  else setStyle("gap-7");
}, [isLoggingIn]);

// å»ºè­°ï¼š
useEffect(() => {
  setStyle(isLoggingIn ? "gap-1" : "gap-7");
}, [isLoggingIn]);
```

### 3.4 TableActions ä¸­çš„æ¢ä»¶æ¸²æŸ“

**æª”æ¡ˆï¼š** `src/components/views/DatabaseView/shared/BaseTable/TableActions.tsx`

**å•é¡Œï¼š**

- å¤šå€‹æ¢ä»¶æ¸²æŸ“å¯ä»¥å„ªåŒ–

**å»ºè­°ï¼š**
ä½¿ç”¨é…ç½®å°è±¡ä¾†ç®¡ç†æŒ‰éˆ•ç‹€æ…‹ï¼š

```typescript
const buttonConfig = [
  { show: hasFilter, onClick: onClearFilter, label: "æ¸…é™¤éæ¿¾" },
  { show: !isEditing, onClick: onEdit, label: "ç·¨è¼¯" },
  { show: isEditing, onClick: onReset, label: "é‡ç½®è³‡æ–™" },
  { show: isEditing, onClick: onUpdate, label: "ç¢ºèªä¿®æ”¹" },
].filter((btn) => btn.show);
```

### 3.5 ResultArea ä¸­çš„ switch

**æª”æ¡ˆï¼š** `src/components/views/MobileDatabaseView/ResultArea/index.tsx`

**å•é¡Œï¼š**

- Switch èªå¥å¯ä»¥æ”¹ç‚ºé…ç½®å°è±¡

**å»ºè­°ï¼š**

```typescript
const componentMap = {
  price: Price,
  cost: Cost,
  customer: Customer,
  supplier: Supplier,
  inventory: Inventory,
};

const Component = componentMap[tab as keyof typeof componentMap];
return Component ? <Component {...props} /> : null;
```

---

## 4. Import é †åºä¸çµ±ä¸€

### 4.1 ç•¶å‰å•é¡Œ

å°ˆæ¡ˆä¸­ import é †åºä¸ä¸€è‡´ï¼Œæœ‰äº›æ–‡ä»¶éµå¾ªæŸäº›è¦å‰‡ï¼Œæœ‰äº›æ²’æœ‰ã€‚

### 4.2 å»ºè­°çš„ Import é †åºè¦ç¯„

å»ºè­°çµ±ä¸€æ¡ç”¨ä»¥ä¸‹é †åºï¼š

1. **React ç›¸é—œ**

   ```typescript
   import { useState, useEffect } from "react";
   ```

2. **ç¬¬ä¸‰æ–¹åº«ï¼ˆæŒ‰å­—æ¯é †åºï¼‰**

   ```typescript
   import dayjs from "dayjs";
   import { useForm } from "react-hook-form";
   import { useNavigate } from "react-router-dom";
   ```

3. **UI çµ„ä»¶åº«**

   ```typescript
   import { Button } from "@/components/ui/button";
   import { ArrowUp } from "lucide-react";
   ```

4. **å…§éƒ¨çµ„ä»¶ï¼ˆç›¸å°è·¯å¾‘ï¼‰**

   ```typescript
   import Table from "./Table";
   import SearchCustom from "./SearchCustom";
   ```

5. **å…§éƒ¨çµ„ä»¶ï¼ˆçµ•å°è·¯å¾‘ @/ï¼‰**

   ```typescript
   import { Filter } from "@/components/views/DatabaseView/shared/Filter";
   ```

6. **Stores/Hooks**

   ```typescript
   import useCreateInbound from "@/stores/useCreateInbound";
   ```

7. **API**

   ```typescript
   import usePostInboundApi from "@/api/supabase/inboundApi/usePostInboundApi";
   ```

8. **Types**

   ```typescript
   import { CreateInbound } from "../type";
   import { CustomerType } from "@/types/CustomerType";
   ```

9. **Constants/Utils**

   ```typescript
   import { TABS_CONSTANTS } from "./constants";
   ```

10. **æ¨£å¼æ–‡ä»¶**
    ```typescript
    import "./index.css";
    ```

### 4.3 éœ€è¦ä¿®æ­£çš„æ–‡ä»¶ç¯„ä¾‹

**ç¯„ä¾‹ 1ï¼š** `src/components/views/CreateView/CreateInbound/CreatingBox/index.tsx`

- ç•¶å‰é †åºæ··äº‚
- å»ºè­°é‡æ–°æ’åˆ—

**ç¯„ä¾‹ 2ï¼š** `src/components/views/CreateView/CreateOutbound/CreatingBox/index.tsx`

- åŒæ¨£éœ€è¦èª¿æ•´é †åº

**ç¯„ä¾‹ 3ï¼š** `src/components/views/DatabaseView/shared/BaseTable/index.tsx`

- Import é †åºéœ€è¦çµ±ä¸€

---

## ç¸½çµèˆ‡å„ªå…ˆç´šå»ºè­°

### é«˜å„ªå…ˆç´šï¼ˆå¿…é ˆä¿®å¾©ï¼‰

1. âœ… **æ‹¼å­—éŒ¯èª¤**ï¼šå·²ä¿®æ­£ `inboundAPi` â†’ `inboundApi`ã€`outboundAPi` â†’ `outboundApi`
2. âœ… **é¡å‹éŒ¯èª¤**ï¼šä¿®æ­£ `usePostCustomerApi.ts` ä¸­çš„é¡å‹éŒ¯èª¤

### ä¸­å„ªå…ˆç´šï¼ˆå»ºè­°æ”¹é€²ï¼‰

3. ğŸ”„ **BaseTable æ‹†åˆ†**ï¼šå°‡å¤§å‹çµ„ä»¶æ‹†åˆ†ç‚ºæ›´å°çš„çµ„ä»¶å’Œ hooks
4. ğŸ”„ **çµ±ä¸€å‘½å**ï¼šå°‡ `Custom` çµ±ä¸€ç‚º `Customer`

### ä½å„ªå…ˆç´šï¼ˆå„ªåŒ–å»ºè­°ï¼‰

5. âš¡ **ç°¡åŒ–åˆ¤æ–·å¼**ï¼šå„ªåŒ–æ¢ä»¶åˆ¤æ–·é‚è¼¯
6. âš¡ **çµ±ä¸€ Import é †åº**ï¼šå»ºç«‹ä¸¦éµå¾ªçµ±ä¸€çš„ import é †åºè¦ç¯„

---

## é¡å¤–å»ºè­°

1. **è€ƒæ…®ä½¿ç”¨ ESLint è¦å‰‡**ï¼šé…ç½® `eslint-plugin-import` ä¾†å¼·åˆ¶åŸ·è¡Œ import é †åº
2. **æå–å…±ç”¨é‚è¼¯**ï¼šCreateInbound å’Œ CreateOutbound æœ‰å¾ˆå¤šç›¸ä¼¼çš„é‚è¼¯ï¼Œå¯ä»¥æå–å…±ç”¨ hook
3. **é¡å‹å®‰å…¨**ï¼šç¢ºä¿æ‰€æœ‰ API èª¿ç”¨éƒ½ä½¿ç”¨æ­£ç¢ºçš„é¡å‹
4. **ä»£ç¢¼å¯©æŸ¥**ï¼šå»ºè­°åœ¨ä¿®å¾©é€™äº›å•é¡Œå¾Œé€²è¡Œä»£ç¢¼å¯©æŸ¥
